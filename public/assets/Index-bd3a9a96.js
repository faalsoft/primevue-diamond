import{q,a as h,b as g,c as x,f as r,d as s,F as z,e as G,j as B,z as S,t as N,k as O,r as f,o as P,w as I,m as H,v as J,g as A,p as K,G as Q,I as W,D as X}from"./index-c4f39c8f.js";const Y={class:"overflow-auto"},Z={class:"flex flex-row md:flex-column gap-1 md:gap-2 list-none m-0 p-0 overflow-auto"},ee=["onClick"],te={key:0,class:"ml-auto text-sm font-semibold bg-primary-50 text-primary-900 px-2 py-1 hidden md:inline text-center",style:{"border-radius":"2rem",width:"23px",height:"23px"}},le={__name:"MailSidebar",props:{items:{type:Array,default:()=>[]}},setup(k){const p=q(),l=o=>{const m=o.routerLink||"/apps/mail/compose";p.push(m)};return(o,m)=>{const u=h("Button");return g(),x("div",null,[r(u,{onClick:l,label:"Compose New",class:"mb-5 w-full",outlined:""}),s("div",Y,[s("ul",Z,[(g(!0),x(z,null,G(k.items,a=>(g(),x("li",{key:a.id,class:B(["cursor-pointer select-none p-3 transition-duration-150 border-round flex align-items-center justify-content-center md:justify-content-start md:flex-1 flex-auto",{"bg-primary":S(p).currentRoute.value.path===a.routerLink,"hover:surface-hover":S(p).currentRoute.value.path!==a.routerLink}]),onClick:b=>l(a)},[s("i",{class:B(["md:mr-3 text-600 transition-duration-150 text-lg",[a.icon,{"text-primary-50":S(p).currentRoute.value.path===a.routerLink}]])},null,2),s("span",{class:B(["text-900 font-medium hidden md:inline",{"text-primary-50":S(p).currentRoute.value.path===a.routerLink}])},N(a.label),3),a.badge?(g(),x("span",te,N(a.badge),1)):O("",!0)],10,ee))),128))])])])}}},ae={class:"p-0 m-0"},oe={class:"surface-section grid grid-nogutter formgrid flex-column md:flex-row gap-6 p-5 border-round"},se={class:"col"},ne=s("label",{for:"to",class:"block text-900 font-semibold mb-3"},"To",-1),ie={class:"col"},re=s("label",{for:"Subject",class:"block text-900 font-semibold mb-3"},"Subject",-1),ue={key:0,class:"col-12 field"},de={class:"border-1 surface-border border-round p-4"},ce={class:"col-12 field"},pe=s("i",{class:"pi pi-ellipsis-h"},null,-1),me=[pe],ve={class:"flex column-gap-3 justify-content-end p-5 border-top-1 surface-border"},fe={__name:"Reply",props:{dialogVisible:{type:Boolean,default:!1},mailDetail:{type:Object,default:null}},emits:["save","update:dialogVisible"],setup(k,{emit:p}){const l=f({}),o=f({}),m=p,u=k,a=f(!1),b=f(!1);P(()=>{c()}),I(()=>u.mailDetail,()=>{c()});const c=()=>{l.value={...u.mailDetail}},C=()=>{const d=$();m("save",d)},$=()=>({...l.value,...o.value,id:j(),to:u.mailDetail.to||u.mailDetail.from,sent:!0,archived:!1,trash:!1,spam:!1,starred:!1,important:!1,date:L()}),M=()=>{a.value=!a.value},j=()=>{let d="",n="0123456789";for(let _=0;_<5;_++)d+=n.charAt(Math.floor(Math.random()*n.length));return d},L=()=>new Date().toDateString().split(" ").slice(1,4).join(" ");return I(()=>u.dialogVisible,d=>{b.value=d}),I(()=>b.value,d=>{m("update:dialogVisible",d)}),(d,n)=>{const _=h("InputIcon"),y=h("InputText"),V=h("IconField"),D=h("Editor"),w=h("Button"),R=h("Dialog"),e=H("tooltip");return g(),J(R,{visible:b.value,"onUpdate:visible":n[5]||(n[5]=t=>b.value=t),header:"New Message",modal:"",class:"mx-3 sm:mx-0 sm:w-full md:w-8 lg:w-6",contentClass:"border-round-bottom border-top-1 surface-border p-0"},{default:A(()=>[s("div",ae,[s("div",oe,[s("div",se,[ne,r(V,{iconPosition:"left",class:"w-full",style:{height:"3.5rem"}},{default:A(()=>[r(_,{class:"pi pi-user",style:{left:"1.5rem"}}),r(y,{id:"to",type:"text",class:"w-full pl-7 text-900 font-semibold",style:{height:"3.5rem"},modelValue:l.value.from,"onUpdate:modelValue":n[0]||(n[0]=t=>l.value.from=t)},null,8,["modelValue"])]),_:1})]),s("div",ie,[re,r(V,{iconPosition:"left",class:"w-full",style:{height:"3.5rem"}},{default:A(()=>[r(_,{class:"pi pi-pencil",style:{left:"1.5rem"}}),r(y,{id:"subject",type:"text",placeholder:"Subject",class:"w-full pl-7 text-900 font-semibold",style:{height:"3.5rem"},modelValue:l.value.title,"onUpdate:modelValue":n[1]||(n[1]=t=>l.value.title=t)},null,8,["modelValue"])]),_:1})]),a.value?(g(),x("div",ue,[s("div",de,N(l.value.message),1)])):O("",!0),s("div",ce,[K((g(),x("span",{class:"surface-ground cursor-pointer border-round px-2",onClick:n[2]||(n[2]=t=>M())},me)),[[e,a.value?"Hide content":"Show content"]]),r(D,{editorStyle:{height:"250px"},class:"mt-3",modelValue:o.value.message,"onUpdate:modelValue":n[3]||(n[3]=t=>o.value.message=t)},null,8,["modelValue"])])]),s("div",ve,[r(w,{type:"button",outlined:"",icon:"pi pi-image"}),r(w,{type:"button",outlined:"",icon:"pi pi-paperclip"}),r(w,{type:"button",class:"h-3rem",icon:"pi pi-send",label:"Send",onClick:n[4]||(n[4]=t=>C())})])])]),_:1},8,["visible"])}}},be={class:"card"},he={class:"flex flex-column md:flex-row gap-4"},ge={class:"w-full md:w-3 xl:w-2 xl:p-3"},_e={class:"md:w-9 xl:w-10 xl:p-3"},ye={__name:"Index",setup(k){const p=Q(),l=f([]),o=f({}),m=f("inbox"),u=f(!1),a=f(null),b=W();P(async()=>{m.value=b.path.split("/")[3],l.value=await C(),c(l.value)}),I(()=>b.path,e=>{m.value=e.split("/")[3]});const c=async e=>{$(e)},C=async()=>{const e=await fetch("/demo/data/mail.json"),{data:t}=await e.json();return t},$=e=>{for(const t of e)!t.archived&&!t.trash&&!t.spam&&!t.sent&&M("inbox",t),Object.keys(t).forEach(i=>{t[i]===!0&&M(i,t)})},M=(e,t)=>{o.value[e]?o.value[e].push(t):o.value[e]=[]},j=X(()=>{var t,i,v,T,E,U,F;const e=o.value;return[{label:"Inbox",icon:"pi pi-inbox",badge:((t=e.inbox)==null?void 0:t.length)||0,routerLink:"/apps/mail/inbox"},{label:"Starred",icon:"pi pi-star",badge:((i=e.starred)==null?void 0:i.length)||0,routerLink:"/apps/mail/starred"},{label:"Spam",icon:"pi pi-ban",badge:((v=e.spam)==null?void 0:v.length)||0,routerLink:"/apps/mail/spam"},{label:"Important",icon:"pi pi-bookmark",badge:((T=e.important)==null?void 0:T.length)||0,routerLink:"/apps/mail/important"},{label:"Sent",icon:"pi pi-send",badge:((E=e.sent)==null?void 0:E.length)||0,routerLink:"/apps/mail/sent"},{label:"Archived",icon:"pi pi-book",badge:((U=e.archived)==null?void 0:U.length)||0,routerLink:"/apps/mail/archived"},{label:"Trash",icon:"pi pi-trash",badge:((F=e.trash)==null?void 0:F.length)||0,routerLink:"/apps/mail/trash"}]}),L=async e=>{o.value={};const t=e.length>0?"Mails deleted":"Mail deleted";y("trash",e),p.add({severity:"info",summary:"Info",detail:t,life:3e3}),c(l.value)},d=async e=>{o.value={},e.forEach(t=>{l.value.find(i=>i.id===t.id).spam=!0}),c(l.value)},n=async e=>{o.value={},y("archived",e),c(l.value)},_=async(e,t,i)=>{o.value={},l.value.find(v=>v.id===t.id)[e]=i,c(l.value)},y=(e,t)=>{t.length>0?t.forEach(i=>{l.value.find(v=>v.id===i.id)[e]=!0}):l.value.find(i=>i.id===t.id)[e]=!0},V=e=>{u.value=!0,a.value=e},D=e=>{u.value=!1,a.value=null,o.value={},l.value.push(e),c(l.value)},w=e=>{o.value={},l.value.push(e),c(l.value)},R=e=>{u.value=e};return(e,t)=>{const i=h("router-view");return g(),x(z,null,[s("div",be,[s("div",he,[s("div",ge,[r(le,{items:j.value},null,8,["items"])]),s("div",_e,[r(i,{allMails:l.value,mails:o.value[m.value]||void 0,onTrash:L,onSpam:d,onArchive:n,"onChange:mail:type":_,onReply:V,"onSend:message":D,"onNew:mail":w},null,8,["allMails","mails"])])])]),r(fe,{visible:u.value,"onUpdate:visible":t[0]||(t[0]=v=>u.value=v),"mail-detail":a.value,onSave:D,"onUpdate:dialogVisible":t[1]||(t[1]=v=>R())},null,8,["visible","mail-detail"])],64)}}};export{ye as default};
